#include <Arduino.h>
#include "Wire.h"
#include "Artron_DS1338.h"

Artron_DS1338 rtc(&Wire);

void setup() {
    Serial.begin(115200);

    Wire.begin();
    rtc.begin();

    struct tm timeinfo;
    timeinfo.tm_hour = 16;
    timeinfo.tm_min = 24;
    timeinfo.tm_sec = 12;
    timeinfo.tm_year = 2021 - 1900;
    rtc.write(&timeinfo);
}

void loop() {
    struct tm timeinfo;
    rtc.read(&timeinfo);
    Serial.printf("%d/%d/%d %d:%d:%d\n", 
        timeinfo.tm_mday, timeinfo.tm_mon, timeinfo.tm_year + 1900, 
        timeinfo.tm_hour, timeinfo.tm_min, timeinfo.tm_sec
    );
    delay(1000);
}

